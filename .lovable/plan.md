

# Вкладка "Сводка" -- аналитический дашборд

## Что будет сделано

Новая вкладка "Сводка" в навигации (между "Отзывы" и "Чаты") с интерактивными графиками и фильтрами по датам, артикулу и рейтингу. Все данные берутся из уже загруженных отзывов текущего кабинета -- без новых таблиц в базе.

## Состав дашборда

1. **Панель фильтров** -- выбор диапазона дат (календарь), выпадающий список артикулов, фильтр по рейтингу (1-5 звёзд, мультивыбор)
2. **Карточки-счётчики** -- всего отзывов, средний рейтинг, ожидают ответа, отвечено
3. **График "Отзывы по дням"** -- линейный/столбчатый (recharts), количество отзывов в разрезе дат
4. **График "Распределение рейтингов"** -- горизонтальная гистограмма (1-5 звёзд)
5. **Таблица топ-артикулов** -- артикул, название, кол-во отзывов, средний рейтинг, % негативных

## Технические детали

### Новые файлы

- `src/components/DashboardSection.tsx` -- основной компонент вкладки с фильтрами и графиками
- `src/hooks/useDashboardData.ts` -- хук, который принимает отзывы и фильтры, возвращает агрегированные данные (мемоизация через `useMemo`)

### Изменения в существующих файлах

- `src/components/NavTabs.tsx` -- добавить кнопку "Сводка" с иконкой `BarChart3`
- `src/pages/Index.tsx` -- добавить ветку `activeTab === "dashboard"` для рендера `DashboardSection`
- `src/components/Header.tsx` -- обновить заголовок/подзаголовок при переключении на вкладку "Сводка"

### Используемые библиотеки

- `recharts` (уже установлен) -- для графиков
- `react-day-picker` + `date-fns` (уже установлены) -- для выбора диапазона дат
- shadcn `Select`, `Popover`, `Calendar`, `Badge` -- для UI фильтров

### Логика фильтрации

Данные берутся из существующего хука `useReviews()` (уже скоупленного по кабинету). Фильтрация происходит на клиенте через `useMemo`:

```text
reviews -> filterByDateRange -> filterByArticles -> filterByRatings -> aggregatedStats
```

Никаких дополнительных запросов к базе не требуется.

### Структура компонента DashboardSection

```text
DashboardSection
  +-- FilterBar (даты, артикул, рейтинг)
  +-- StatsRow (4 карточки: всего, ср. рейтинг, ожидают, отвечено)
  +-- ChartsRow
  |     +-- ReviewsByDayChart (BarChart, recharts)
  |     +-- RatingDistributionChart (горизонтальный BarChart)
  +-- TopArticlesTable (таблица с сортировкой)
```
