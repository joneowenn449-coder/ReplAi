

# Редактирование отправленного ответа

## Суть

WB дает 1 возможность изменить ответ. Нужно добавить возможность редактировать уже отправленный ответ: при клике на текст ответа появляются кнопки "Перегенерировать", "Редактировать" и "Отправить".

## Как будет работать

1. Пользователь кликает на текст отправленного ответа
2. Появляются три кнопки действий:
   - **Перегенерировать** -- вызывает generate-reply, создает новый черновик ИИ (отзыв переходит в статус pending с новым черновиком)
   - **Редактировать** -- открывает textarea с текущим текстом ответа для ручного редактирования
   - **Отправить** -- отправляет отредактированный текст на WB через send-reply
3. Textarea показывается только после нажатия "Редактировать"
4. Кнопка "Отправить" активна только в режиме редактирования

## Что будет изменено

### Файл: `src/components/ReviewCard.tsx`

- Добавить состояние `editingSentAnswer` (boolean) -- раскрыты ли кнопки действий
- Добавить состояние `editingSentText` (string) -- текст в textarea при редактировании  
- Добавить состояние `sentEditMode` (boolean) -- активен ли режим редактирования textarea
- По клику на текст ответа -- переключать `editingSentAnswer` (показать/скрыть кнопки)
- Визуально: курсор pointer на тексте ответа, подсказка что можно кликнуть
- Кнопки:
  - "Перегенерировать" -- вызывает `generateReply.mutate(id)`, что создаст новый черновик и переведет отзыв обратно в pending
  - "Редактировать" -- включает `sentEditMode`, показывает textarea с текущим `sentAnswer`
  - "Отправить" -- вызывает `sendReply.mutate({ reviewId: id, answerText: editingSentText })` для отправки измененного текста
  - "Отмена" -- выход из режима редактирования

## Затрагиваемый файл

| Файл | Изменение |
|------|-----------|
| `src/components/ReviewCard.tsx` | Добавить интерактивность к блоку отправленного ответа |

## Бэкенд

Изменения бэкенда **не требуются** -- существующие edge-функции `send-reply` и `generate-reply` уже поддерживают нужную логику:
- `send-reply` принимает `answer_text` и отправляет на WB
- `generate-reply` создает новый черновик и ставит статус pending

## Результат

Пользователь сможет кликнуть на любой отправленный ответ, отредактировать его или перегенерировать, и отправить обновленную версию на Wildberries.

