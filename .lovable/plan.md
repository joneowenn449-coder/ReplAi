

# Добавить шильдик "Редактировано" для отредактированных ответов

## Суть

После того, как пользователь редактирует и повторно отправляет ответ на WB, на карточке отзыва должен появляться дополнительный шильдик "Редактировано" (оранжевый), рядом с существующими шильдиками "Автоответ" / "Ручной".

## Что будет изменено

### 1. База данных -- новая колонка

Добавить колонку `is_edited` (boolean, default false) в таблицу `reviews`. Она будет устанавливаться в `true`, когда ответ отправляется повторно (через редактирование отправленного ответа).

### 2. Backend-функция send-reply

**Файл:** `supabase/functions/send-reply/index.ts`

При обновлении записи в БД после успешной отправки проверять: если у отзыва уже был `sent_answer` (то есть ответ отправляется повторно), устанавливать `is_edited: true`.

### 3. Интерфейс Review и хук

**Файл:** `src/hooks/useReviews.ts`

Добавить поле `is_edited: boolean` в интерфейс `Review`.

### 4. Карточка отзыва

**Файл:** `src/components/ReviewCard.tsx`

- Добавить проп `isEdited?: boolean`
- В секции шильдиков (рядом с "Автоответ" / "Ручной") показывать дополнительный бейдж "Редактировано" с оранжевым стилем (`bg-orange-100 text-orange-700`), если `isEdited === true`

### 5. Передача пропа

**Файл:** `src/pages/Index.tsx`

Передать `isEdited={review.is_edited}` в компонент `ReviewCard`.

## Затрагиваемые файлы

| Файл | Изменение |
|------|-----------|
| Миграция БД | Добавить колонку `is_edited boolean default false` |
| `supabase/functions/send-reply/index.ts` | Устанавливать `is_edited: true` при повторной отправке |
| `src/hooks/useReviews.ts` | Добавить `is_edited` в интерфейс Review |
| `src/components/ReviewCard.tsx` | Добавить проп `isEdited` и шильдик "Редактировано" |
| `src/pages/Index.tsx` | Передать `isEdited` в ReviewCard |

## Результат

- Первый ответ: шильдик "Автоответ" или "Ручной"
- После редактирования и повторной отправки: шильдик "Автоответ"/"Ручной" + "Редактировано"
