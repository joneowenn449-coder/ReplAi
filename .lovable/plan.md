

# Автосохранение переключателей режима ответов

## Проблема

Сейчас при переключении режима (Авто/Ручной) для конкретного рейтинга нужно обязательно нажать "Сохранить". Если пользователь переключил ползунок и закрыл окно -- изменение потеряется. Это неинтуитивно: визуально переключатель уже "включён", но фактически ничего не сохранилось.

## Решение

Сделать переключатели режимов автосохраняемыми -- при каждом переключении сразу отправлять обновление в базу данных. Кнопка "Сохранить" останется для остальных настроек (API-ключ, промпт).

## Изменения в `src/components/SettingsDialog.tsx`

1. **Вынести `replyModes` из локального состояния формы** -- использовать актуальные данные из `settings` напрямую.

2. **При переключении Switch** -- сразу вызывать `updateSettings.mutate()` с новым значением `reply_modes`, без ожидания нажатия "Сохранить".

3. **Кнопка "Сохранить"** -- продолжит сохранять API-ключ и промпт как раньше, но `reply_modes` будет уже сохранён автоматически.

4. **Визуальная обратная связь** -- при автосохранении показать кратковременный индикатор (например, toast-уведомление "Режим обновлён") для подтверждения.

### Технические детали

Файл: `src/components/SettingsDialog.tsx`

Текущая логика:
```text
toggleReplyMode(rating) -> обновляет локальный state replyModes
handleSaveSettings() -> отправляет ВСЕ настройки (ключ, промпт, replyModes) в БД
```

Новая логика:
```text
toggleReplyMode(rating) -> обновляет локальный state + сразу вызывает updateSettings с новым reply_modes
handleSaveSettings() -> отправляет только ключ и промпт (reply_modes уже сохранены)
```

Изменения минимальны -- нужно только добавить вызов `updateSettings.mutate()` внутри функции `toggleReplyMode` и показать toast при успехе.

